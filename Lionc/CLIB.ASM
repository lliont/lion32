FMEMORG EQU $4864
ORG 0
_base:
 MOV.B (_XY),0
JRSR __main
RET
Baddr: DD 0
 
__cnt DD 1
__vec DSW =4*12
_cmdlbuf DSW 81
__fstatus DD 1,1,1,1,1
 DSW =4*20
__fcnt DSW =4*1
__memptr DD 0
__arg1 DB 42,0
__main:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
XOR.D A3,A3
JRSR _parse
MOVR.D A5,(__cnt)
 PUSH A5
GADR A1,__vec ;p1
PUSH A1
MOV.D A3,2
JRSR _main
ADD.D SP,8
XOR.D A1,A1
PUSH A1
MOV.D A3,1
JRSR _exit
ADD.D SP,4
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_free:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,-4(A6)
MOV.D A1,18532
JRSR __eq
MOV.D A2,-8(A6)
MOV.D A1,18538
JRSR __eq
MOV.D A2,-4(A6)
MOV.D a1,(A2)
MOV.D A2,8(A6)
JRSR __ult
OR.D A1,A1
JRNZ 6
JR _4
MOV.D A2,-8(A6)
MOV.D a1,(A2)
MOV.D A2,8(A6)
JRSR __ugt
OR.D A1,A1
JRNZ 6
JR _4
MOV.D A1,1
JR _5
_4:
XOR.D A1,A1
_5:
OR.D A1,A1
JRNZ 6
JR _3
	   MOV.D A2,8(A6)
	   MOV.D A1,-4(A6)
	   SUB.D A1,A2
	   MOVI	 A0,8
	   INT   5
	   MOV.D A1,8(A6)
JR _6
_3:
XOR.D A1,A1
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_6:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_getarg:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,24(A6)
XOR.D A1,A1
JRSR __lt
PUSH A1
MOV.D A1,12(a6)
MOV.D A2,24(A6)
JRSR __ge
POP A2
OR.D A1,A2
OR.D A1,A1
JRNZ 6
JR _8
MOV.D A2,20(A6)
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A1,-1
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_8:
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A1,24(a6)
MOV.D A2,8(A6)
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_9:
MOV.D A1,16(a6)
MOV.D A2,-8(A6)
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _10
MOV.D A1,-8(a6)
MOV.D A2,20(A6)
ADD.D A1,A2
PUSH A1
MOV.D A1,-8(a6)
MOV.D A2,-4(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
OR.D A1,A1
JRZ 6
JR _11
JR _10
_11:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _9
_10:
MOV.D A1,-8(a6)
MOV.D A2,20(A6)
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A1,-8(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_parse:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
	MOV.D -4(A6),A7
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,1
MOV.D (a2),A1
_15:
MOV.D A2,-8(A6)
MOV.D A1,12
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _14
JR _16
_13:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
JR _15
_16:
MOV.D A1,-8(a6)
GADR A2,__vec ;p2
SLL.D A1,2
ADD.D A2,A1
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A1,-8(a6)
GADR A2,_cmdlbuf ;p2
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
JR _13
_14:
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
_17:
MOV.D A1,-8(a6)
MOV.D A2,-4(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,13
JRSR __ne
OR.D A1,A1
JRNZ 6
JR _19
MOV.D A2,-8(A6)
MOV.D A1,80
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _19
MOV.D A1,1
JR _20
_19:
XOR.D A1,A1
_20:
OR.D A1,A1
JRNZ 6
JR _18
MOV.D A1,-8(a6)
GADR A2,_cmdlbuf ;p2
ADD.D A1,A2
PUSH A1
MOV.D A1,-8(a6)
MOV.D A2,-4(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
JR _17
_18:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
GADR A2,_cmdlbuf ;p2
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
GADR A1,_cmdlbuf ;p1
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
GADR A1,__arg1 ;p1
GADR A2,__vec ;p2
MOV.D (a2),A1
_21:
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _22
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _23
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _21
_23:
MOVR.D A2,(__cnt)
MOV.D A1,12
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _24
MOVR.D A1,(__cnt)
GADR A5,__cnt
ADD.D (A5),1
GADR A2,__vec ;p2
SLL.D A1,2
ADD.D A1,A2
PUSH A1
MOV.D A1,-4(a6)
POP A2
MOV.D (a2),A1
_24:
_25:
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _26
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _27
MOV.D A2,-4(A6)
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _26
_27:
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _25
_26:
JR _21
_22:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_fix_fname:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,A6
ADD.D A2,-4
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
_29:
MOV.D A1,-4(a6)
MOV.D A2,8(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,46
JRSR __ne
OR.D A1,A1
JRNZ 6
JR _31
MOV.D A2,-4(A6)
MOV.D A1,11
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _31
MOV.D A1,1
JR _32
_31:
XOR.D A1,A1
_32:
OR.D A1,A1
JRNZ 6
JR _30
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADD.D (A2),1
JR _29
_30:
MOV.D A1,-4(a6)
MOV.D A2,8(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,46
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _33
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,2
MOV.D (a2),A1
_36:
MOV.D A2,-8(A6)
MOV.D A1,-1
JRSR __gt
OR.D A1,A1
JRNZ 6
JR _35
JR _37
_34:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
JR _36
_37:
MOV.D A1,-8(a6)
ADD.D A1,8
MOV.D A2,8(A6)
ADD.D A1,A2
PUSH A1
MOV.D A1,-4(a6)
ADDI A1,1
PUSH A1
MOV.D A1,-8(a6)
POP A2
ADD.D A1,A2
MOV.D A2,8(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
JR _34
_35:
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
_40:
MOV.D A1,-4(a6)
MOV.D A2,8
XCHG A1,A2
SUB.D A1,A2
MOV.D A2,-8(A6)
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _39
JR _41
_38:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
JR _40
_41:
MOV.D A1,-8(a6)
MOV.D A2,-4(A6)
ADD.D A1,A2
MOV.D A2,8(A6)
ADD.D A2,A1
MOV.D A1,32
MOV.B (A2),A1
JR _38
_39:
_33:
MOV.D A2,8(A6)
ADD.D A2,11
XOR.D A1,A1
MOV.B (A2),A1
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_fsize:
PUSH A6
MOV.D A6,SP
ADDI A6,4
  MOV.D A1,8(A6)
  MOV.D	A0,21
  INT 4
  MOV.D A1,A0
POP A6
RET
_fseek:
PUSH A6
MOV.D A6,SP
ADDI A6,4
  MOV.D A1,12(A6)
  MOV.D A2,8(A6)
  MOV.D	A0,19
  INT 4
  MOV.D A1,A0
POP A6
RET
_ftell:
PUSH A6
MOV.D A6,SP
ADDI A6,4
  MOV.D A1,8(A6)
  MOV.D	A0,20
  INT 4
  MOV.D A1,A0
POP A6
RET
_fclose:
PUSH A6
MOV.D A6,SP
ADDI A6,4
  MOV.D A1,8(A6)
  MOV.D	A0,17
  INT 4
MOV.D A2,8(A6)
MOV.D A1,4
JRSR __gt
OR.D A1,A1
JRNZ 6
JR _46
MOV.D A2,A6
ADD.D A2,8
PUSH A2
MOV.D a1,(A2)
SUB.D A1,18600
POP A2
MOV.D (a2),A1
MOV.D A2,A1
MOV.D A1,34
MOVI A0,9
INT 4
ADD.D A1,5
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
MOV.D A1,8(a6)
GADR A2,__fstatus ;p2
SLL.D A1,2
ADD.D A2,A1
XOR.D A1,A1
MOV.D (a2),A1
POP A6
RET
_46:
XOR.D A1,A1
POP A6
RET
_47:
POP A6
RET
_feof:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A2,8(A6)
MOV.D A1,4
JRSR __gt
OR.D A1,A1
JRNZ 6
JR _49
MOV.D A2,A6
ADD.D A2,8
PUSH A2
MOV.D a1,(A2)
SUB.D A1,18600
POP A2
MOV.D (a2),A1
MOV.D A2,A1
MOV.D A1,34
MOVI A0,9
INT 4
ADD.D A1,5
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
_49:
MOV.D A1,8(a6)
GADR A2,__fstatus ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,2
AND.D A1,A2
POP A6
RET
_ferror:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A2,8(A6)
MOV.D A1,4
JRSR __gt
OR.D A1,A1
JRNZ 6
JR _51
MOV.D A2,A6
ADD.D A2,8
PUSH A2
MOV.D a1,(A2)
SUB.D A1,18600
POP A2
MOV.D (a2),A1
MOV.D A2,A1
MOV.D A1,34
MOVI A0,9
INT 4
ADD.D A1,5
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
_51:
MOV.D A1,8(a6)
GADR A2,__fstatus ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,4
AND.D A1,A2
POP A6
RET
__read:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,8(a6)
OR.D A1,A1
JRZ 6
JR _53
XOR.D A3,A3
JRSR _getkey
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_53:
	MOV.D  A5,SP
	MOV.D  A1,16(A5)
	MOVI   A2,1
	MOV.D   A3,A6
	SUBI	A3,1
	MOV.D  A0,18
	INT    4
	MOVI   A1,0
	GADR   A3,__fcnt
	MOV.D  (A3),A0
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_54:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_fread:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A4,8(A6)
PUSH A4
MOV.D A4,20(A6)
PUSH A4
MOV.D A1,16(a6)
MOV.D A2,12(A6)
MULU.D A1,A2
PUSH A1
MOV.D A3,3
JRSR _read
ADD.D SP,12
PUSH A1
MOV.D A1,16(a6)
POP A2
MOVI A0,6
INT 5
POP A6
RET
_read:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A2,A6
ADD.D A2,-4
XOR.D A1,A1
MOV.D (a2),A1
_57:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _58
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A4,16(A6)
PUSH A4
MOV.D A3,1
JRSR __read
ADD.D SP,4
POP A2
MOV.B (A2),A1
MOVR.D A1,(__fcnt)
CMPI A1,0
JRZ 2
MOVI A1,1
XOR.D A1,1
OR.D A1,A1
JRNZ 6
JR _59
JR _58
_59:
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _57
_58:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_fopen:
PUSH A6
MOV.D A6,SP
ADDI A6,4
	MOV.D A5,SP
	MOV.D A1,12(A5)
    MOV.D A4,16(A5)
	MOV.D A0,16
	INT  4
	XCHG A1,A0
POP A6
RET
__alloc:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,12(A6) 
MOVI A0,7
INT 5
MOV.D A1,A0
POP A6
RET
_calloc:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
MOV.D A2,12(A6)
MUL.D A1,A2
PUSH A1
MOV.D A1,1
PUSH A1
MOV.D A3,2
JRSR __alloc
ADD.D SP,8
POP A6
RET
_fscanf:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
JRSR _CCARGC
MOV.D A2,A1
MOV.D A1,A6
ADD.D A1,8
SLL.D A2,2
ADD.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
SUBI A1,1
SUBI A1,1
SUBI A1,1
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,A1
MOV.D A4,(A2)
PUSH A4
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
SUBI A1,1
SUBI A1,1
SUBI A1,1
SUBI A1,1
MOV.D (a2),A1
PUSH A1
MOV.D A3,2
JRSR __scan
ADD.D SP,8
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_scanf:
PUSH A6
MOV.D A6,SP
ADDI A6,4
XOR.D A1,A1
PUSH A1
JRSR _CCARGC
MOV.D A2,A1
MOV.D A1,A6
ADD.D A1,8
SLL.D A2,2
ADD.D A2,A1
MOV.D A1,4
XCHG A1,A2
SUB.D A1,A2
PUSH A1
MOV.D A3,2
JRSR __scan
ADD.D SP,8
POP A6
RET
_getchar:
PUSH A6
MOV.D A6,SP
ADDI A6,4
XOR.D A3,A3
JRSR _getkey
POP A6
RET
_uget DD -1
_fgetc:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,8(a6)
OR.D A1,A1
JRZ 6
JR _67
MOVR.D A2,(_uget)
MOV.D A1,-1
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _68
XOR.D A3,A3
JRSR _getkey
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_68:
MOVR.D A1,(_uget)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOVR.D (_uget),-1
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_69:
JR _70
_67:
	MOV.D  A5,SP
	MOV.D  A1,16(A5)
	MOVI   A2,1
	MOV.D   A3,A6
	SUBI	A3,7
	MOV.D  A0,18
	INT    4
_70:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_ungetc:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,12(a6)
MOVR.D (_uget),A1; ***
 POP A6
RET
__scan:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-48
MOV.D A2,A6
ADD.D A2,-24
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUB.D (A2),4
MOV.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
_73:
MOV.D A2,-8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _74
MOV.D A2,-8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _75
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _73
_75:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,37
JRSR __ne
OR.D A1,A1
JRNZ 6
JR _76
JR _73
_76:
MOV.D A2,-8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,42
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _77
MOV.D A1,A6
ADD.D A1,-20
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-16
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _78
_77:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUB.D (A2),4
MOV.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-16
MOV.D (a2),A1
_78:
MOV.D A2,A6
ADD.D A2,-8
PUSH A2
MOV.D A4,(A2)
PUSH A4
MOV.D A4,-8(A6)
PUSH A4
MOV.D A1,A6
ADD.D A1,-28
PUSH A1
MOV.D A3,2
JRSR _utoi
ADD.D SP,8
POP A2
ADD.D A1,A2
POP A2
MOV.D (a2),A1
MOV.D A1,-28(a6)
CMPI A1,0
JRZ 2
MOVI A1,1
XOR.D A1,1
OR.D A1,A1
JRNZ 6
JR _79
MOV.D A2,A6
ADD.D A2,-28
MOV.D A1,32767
MOV.D (a2),A1
_79:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A6
ADD.D A2,-36
MOV.D (a2),A1
CMPI A1,0
JRZ 2
MOVI A1,1
XOR.D A1,1
OR.D A1,A1
JRNZ 6
JR _80
JR _74
_80:
_81:
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,1
JRSR _fgetc
ADD.D SP,4
MOV.D A2,A6
ADD.D A2,-32
MOV.D (a2),A1
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _82
JR _81
_82:
MOV.D A2,-32(A6)
MOV.D A1,-1
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _83
MOV.D A1,-24(a6)
OR.D A1,A1
JRNZ 6
JR _84
JR _74
JR _85
_84:
MOV.D A1,-1
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_85:
_83:
MOV.D A4,-32(A6)
PUSH A4
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,2
JRSR _ungetc
ADD.D SP,8
MOV.D A1,-36(a6)
JR _88
_89:
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,1
JRSR _fgetc
ADD.D SP,4
MOV.D A2,-4(A6)
MOV.B (A2),A1
JR _87
_90:
_91:
MOV.D A2,A6
ADD.D A2,-28
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _92
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,1
JRSR _fgetc
ADD.D SP,4
MOV.D A2,-4(A6)
MOV.B (A2),A1
MOV.D A2,A1
MOV.D A1,-1
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _93
JR _92
_93:
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _94
JR _92
_94:
MOV.D A1,A6
ADD.D A1,-20
MOV.D A2,-4(A6)
JRSR __ne
OR.D A1,A1
JRNZ 6
JR _95
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
_95:
JR _91
_92:
MOV.D A2,-4(A6)
XOR.D A1,A1
MOV.B (A2),A1
JR _87
_96:
MOV.D A1,-36(a6)
JR _99
_100:
MOV.D A2,A6
ADD.D A2,-40
MOV.D A1,2
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-48
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-44
MOV.D A1,32767
MOV.D (a2),A1
JR _98
_101:
MOV.D A2,A6
ADD.D A2,-40
MOV.D A1,10
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-48
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-44
MOV.D A1,32767
MOV.D (a2),A1
JR _98
_102:
MOV.D A2,A6
ADD.D A2,-40
MOV.D A1,8
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-48
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-44
MOV.D A1,32767
MOV.D (a2),A1
JR _98
_103:
MOV.D A2,A6
ADD.D A2,-40
MOV.D A1,10
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-48
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-44
MOV.D A1,32767
MOV.D (a2),A1
JR _98
_104:
MOV.D A2,A6
ADD.D A2,-40
MOV.D A1,16
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-48
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-44
MOV.D A1,32767
MOV.D (a2),A1
JR _98
_105:
MOV.D A1,-24(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
JR _98
_99:
JRSR __switch
 DA _100
 DD 98
 DA _101
 DD 100
 DA _102
 DD 111
 DA _103
 DD 117
 DA _104
 DD 120
 DD 0
JR _105
_98:
MOV.D A2,A6
ADD.D A2,-12
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,-16(A6)
MOV.D (a2),A1
_106:
MOV.D A2,A6
ADD.D A2,-28
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _108
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,1
JRSR _fgetc
ADD.D SP,4
MOV.D A2,A6
ADD.D A2,-32
MOV.D (a2),A1
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
CMPI A1,0
JRZ 2
MOVI A1,1
XOR.D A1,1
OR.D A1,A1
JRNZ 6
JR _108
MOV.D A2,-32(A6)
MOV.D A1,-1
JRSR __ne
OR.D A1,A1
JRNZ 6
JR _108
MOV.D A1,1
JR _109
_108:
XOR.D A1,A1
_109:
OR.D A1,A1
JRNZ 6
JR _107
MOV.D A1,-48(a6)
CMPI A1,0
JRZ 2
MOVI A1,1
XOR.D A1,1
OR.D A1,A1
JRNZ 6
JR _110
MOV.D A2,-32(A6)
MOV.D A1,45
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _111
MOV.D A2,A6
ADD.D A2,-48
MOV.D A1,-1
MOV.D (a2),A1
JR _106
JR _112
_111:
MOV.D A2,A6
ADD.D A2,-48
MOV.D A1,1
MOV.D (a2),A1
_112:
_110:
MOV.D A2,-32(A6)
MOV.D A1,48
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _113
MOV.D A1,-24(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_113:
MOV.D A2,-32(A6)
MOV.D A1,97
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _114
MOV.D A2,A6
ADD.D A2,-32
PUSH A2
MOV.D a1,(A2)
SUB.D A1,87
POP A2
MOV.D (a2),A1
JR _115
_114:
MOV.D A2,-32(A6)
MOV.D A1,65
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _116
MOV.D A2,A6
ADD.D A2,-32
PUSH A2
MOV.D a1,(A2)
SUB.D A1,55
POP A2
MOV.D (a2),A1
JR _117
_116:
MOV.D A2,A6
ADD.D A2,-32
PUSH A2
MOV.D a1,(A2)
SUB.D A1,48
POP A2
MOV.D (a2),A1
_117:
_115:
MOV.D A1,-40(a6)
MOV.D A2,-32(A6)
JRSR __ge
OR.D A1,A1
JRZ 6
JR _119
MOV.D A1,-44(a6)
MOV.D A2,-12(A6)
JRSR __gt
OR.D A1,A1
JRZ 6
JR _119
XOR.D A1,A1
JR _120
_119:
MOV.D A1,1
_120:
OR.D A1,A1
JRNZ 6
JR _118
MOV.D A1,-24(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_118:
MOV.D A1,-40(a6)
MOV.D A2,-12(A6)
MUL.D A1,A2
PUSH A1
MOV.D A1,-32(a6)
POP A2
ADD.D A1,A2
MOV.D A2,A6
ADD.D A2,-12
MOV.D (a2),A1
JR _106
_107:
MOV.D A1,-12(a6)
MOV.D A2,-48(A6)
MUL.D A1,A2
MOV.D A2,-16(A6)
MOV.D (a2),A1
JR _87
_88:
JRSR __switch
 DA _89
 DD 99
 DA _90
 DD 115
 DD 0
JR _96
_87:
MOV.D A2,A6
ADD.D A2,-24
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _73
_74:
MOV.D A1,-24(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_xtoi:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-12
MOV.D A2,8(A6)
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A1,12(a6)
MOV.D A2,A6
ADD.D A2,-12
MOV.D (a2),A1
_122:
MOV.D A2,-12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,48
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _123
MOV.D A2,A6
ADD.D A2,-12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _122
_123:
_124:
MOV.D A2,-12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
JR _128
_129:
_130:
_131:
_132:
_133:
_134:
_135:
_136:
_137:
_138:
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,48
MOV.D (a2),A1
JR _127
_139:
_140:
_141:
_142:
_143:
_144:
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,55
MOV.D (a2),A1
JR _127
_145:
_146:
_147:
_148:
_149:
_150:
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,87
MOV.D (a2),A1
JR _127
_151:
MOV.D A2,12(A6)
MOV.D A1,-12(a6)
SUB.D A1,A2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
JR _127
_128:
JRSR __switch
 DA _129
 DD 48
 DA _130
 DD 49
 DA _131
 DD 50
 DA _132
 DD 51
 DA _133
 DD 52
 DA _134
 DD 53
 DA _135
 DD 54
 DA _136
 DD 55
 DA _137
 DD 56
 DA _138
 DD 57
 DA _139
 DD 65
 DA _140
 DD 66
 DA _141
 DD 67
 DA _142
 DD 68
 DA _143
 DD 69
 DA _144
 DD 70
 DA _145
 DD 97
 DA _146
 DD 98
 DA _147
 DD 99
 DA _148
 DD 100
 DA _149
 DD 101
 DA _150
 DD 102
 DD 0
JR _151
_127:
MOV.D A2,-4(A6)
MOV.D A1,4
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _152
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _153
_152:
MOV.D A1,-2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_153:
MOV.D A2,8(A6)
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,4
SUBI A1,1
SETX A1
SLA.D A2,1
JRX -8
XCHG A1,A2
PUSH A1
MOV.D A2,A6
ADD.D A2,-12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A1,-8(a6)
POP A2
XCHG A1,A2
SUB.D A1,A2
POP A2
ADD.D A1,A2
MOV.D A2,8(A6)
MOV.D (a2),A1
JR _124
_125:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_utoi:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,A6
ADD.D A2,-4
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,8(A6)
XOR.D A1,A1
MOV.D (a2),A1
_155:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,48
JRSR __ge
PUSH A1
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,57
JRSR __le
POP A2
AND.D A1,A2
OR.D A1,A1
JRNZ 6
JR _156
MOV.D A2,8(A6)
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A1,-8(a6)
MOV.D A2,10
MUL.D A1,A2
PUSH A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
SUB.D A1,48
POP A2
ADD.D A1,A2
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A2,-8(A6)
XOR.D A1,A1
JRSR __ge
PUSH A1
MOV.D A2,8(A6)
MOV.D a1,(A2)
MOV.D A2,A1
XOR.D A1,A1
JRSR __lt
POP A2
AND.D A1,A2
OR.D A1,A1
JRNZ 6
JR _157
MOV.D A1,-2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_157:
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A1,-8(a6)
MOV.D A2,8(A6)
MOV.D (a2),A1
JR _155
_156:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_toupper:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A2,8(A6)
MOV.D A1,122
JRSR __le
OR.D A1,A1
JRNZ 6
JR _160
MOV.D A2,8(A6)
MOV.D A1,97
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _160
MOV.D A1,1
JR _161
_160:
XOR.D A1,A1
_161:
OR.D A1,A1
JRNZ 6
JR _159
MOV.D A1,8(a6)
SUB.D A1,32
POP A6
RET
_159:
MOV.D A1,8(a6)
POP A6
RET
_toascii:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
POP A6
RET
_strrchr:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A2,A6
ADD.D A2,-4
XOR.D A1,A1
MOV.D (a2),A1
_164:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _165
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A1,8(a6)
POP A2
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _166
MOV.D A1,12(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_166:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _164
_165:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_strncpy:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,16(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_168:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
CMPI A1,0
JRG 6
JR _169
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
OR.D A1,A1
JRNZ 6
JR _170
JR _168
_170:
_171:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
CMPI A1,0
JRG 6
JR _172
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
JR _171
_172:
JR _168
_169:
MOV.D A2,-4(A6)
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A1,16(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_strncmp:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_174:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _176
MOV.D A2,16(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _176
MOV.D A1,1
JR _177
_176:
XOR.D A1,A1
_177:
OR.D A1,A1
JRNZ 6
JR _175
MOV.D A2,16(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRZ 6
JR _178
XOR.D A1,A1
POP A6
RET
_178:
MOV.D A2,A6
ADD.D A2,16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
JR _174
_175:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _179
MOV.D A2,16(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
XCHG A1,A2
SUB.D A1,A2
POP A6
RET
_179:
XOR.D A1,A1
POP A6
RET
_strncat:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,16(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,16
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
_181:
MOV.D A2,A6
ADD.D A2,16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _182
JR _181
_182:
_183:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _184
MOV.D A2,A6
ADD.D A2,16
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
OR.D A1,A1
JRNZ 6
JR _185
JR _183
_185:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
JR _183
_184:
MOV.D A2,16(A6)
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_strlen:
PUSH A6
MOV.D A6,SP
ADDI A6,4
  MOV.D A1,-1
  MOV.D A5,8(A6)   
  MOV.B A0,(A5)
  ADDI A1,1
  ADDI A5,1
  OR.B A0,A0
  JRNZ -14
POP A6
RET
_strcpy:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,12(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_188:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
OR.D A1,A1
JRNZ 6
JR _189
JR _188
_189:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_strcmp:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_191:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _192
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRZ 6
JR _193
XOR.D A1,A1
POP A6
RET
_193:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _191
_192:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
XCHG A1,A2
SUB.D A1,A2
POP A6
RET
_strchr:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_195:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _196
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A1,8(a6)
POP A2
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _197
MOV.D A1,12(a6)
POP A6
RET
_197:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _195
_196:
XOR.D A1,A1
POP A6
RET
_strcat:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,12(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
_199:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _200
JR _199
_200:
_201:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
OR.D A1,A1
JRNZ 6
JR _202
JR _201
_202:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_reverse:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A4,8(A6)
PUSH A4
MOV.D A3,1
JRSR _strlen
ADD.D SP,4
MOV.D A2,8(A6)
ADD.D A2,A1
MOV.D A1,1
XCHG A1,A2
SUB.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_204:
MOV.D A1,-4(a6)
MOV.D A2,8(A6)
JRSR __ult
OR.D A1,A1
JRNZ 6
JR _205
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
PUSH A1
MOV.D A1,-8(a6)
POP A2
MOV.B (A2),A1
JR _204
_205:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_fputs:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_207:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _208
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A4,8(A6)
PUSH A4
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
JR _207
_208:
POP A6
RET
_puts:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_210:
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _211
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A1,1
PUSH A1
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
JR _210
_211:
POP A6
RET
_fputc:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A2,8(A6)
MOV.D A1,1
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _213
MOV.D A2,12(A6)
MOV.D A1,10
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _214
MOV.D A1,13
PUSH A1
MOV.D A3,1
JRSR _putchar
ADD.D SP,4
JR _215
_214:
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,1
JRSR _putchar
ADD.D SP,4
_215:
JR _216
_213:
	  MOV.D A1,8(A6)
      MOV.D A2,12(A6)
	  MOV.D A0,22
	  INT  4
	  MOV.D A1,A2
_216:
POP A6
RET
_poll:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
XOR.D A3,A3
JRSR __hitkey
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
OR.D A1,A1
JRNZ 6
JR _218
XOR.D A3,A3
JRSR __getkey
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_218:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _219
MOV.D A2,-4(A6)
MOV.D A1,19
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _220
XOR.D A3,A3
JRSR __getkey
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,-4(A6)
MOV.D A1,3
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _221
MOV.D A1,2
PUSH A1
MOV.D A3,1
JRSR _exit
ADD.D SP,4
_221:
XOR.D A1,A1
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_220:
MOV.D A2,-4(A6)
MOV.D A1,3
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _222
MOV.D A1,2
PUSH A1
MOV.D A3,1
JRSR _exit
ADD.D SP,4
_222:
_219:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_pad:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_224:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _225
MOV.D A2,A6
ADD.D A2,16
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A1,12(a6)
POP A2
MOV.B (A2),A1
JR _224
_225:
POP A6
RET
_otoi:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,A6
ADD.D A2,-4
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,8(A6)
XOR.D A1,A1
MOV.D (a2),A1
_227:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,48
JRSR __ge
PUSH A1
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,55
JRSR __le
POP A2
AND.D A1,A2
OR.D A1,A1
JRNZ 6
JR _228
MOV.D A2,8(A6)
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A2,-8(A6)
MOV.D A1,3
SUBI A1,1
SETX A1
SLA.D A2,1
JRX -8
XCHG A1,A2
PUSH A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
SUB.D A1,48
POP A2
ADD.D A1,A2
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A2,-8(A6)
XOR.D A1,A1
JRSR __ge
PUSH A1
MOV.D A2,8(A6)
MOV.D a1,(A2)
MOV.D A2,A1
XOR.D A1,A1
JRSR __lt
POP A2
AND.D A1,A2
OR.D A1,A1
JRNZ 6
JR _229
MOV.D A1,-2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_229:
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A1,-8(a6)
MOV.D A2,8(A6)
MOV.D (a2),A1
JR _227
_228:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_tolower:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A2,8(A6)
MOV.D A1,90
JRSR __le
OR.D A1,A1
JRNZ 6
JR _232
MOV.D A2,8(A6)
MOV.D A1,65
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _232
MOV.D A1,1
JR _233
_232:
XOR.D A1,A1
_233:
OR.D A1,A1
JRNZ 6
JR _231
MOV.D A1,8(a6)
ADD.D A1,32
POP A6
RET
_231:
MOV.D A1,8(a6)
POP A6
RET
_sign:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
CMPI A1,0
JRG 6
JR _235
MOV.D A1,1
POP A6
RET
_235:
MOV.D A1,8(a6)
OR.D A1,A1
JRZ 6
JR _236
XOR.D A1,A1
POP A6
RET
_236:
MOV.D A1,-1
POP A6
RET
_abs:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
CMPI A1,0
JRL 6
JR _238
MOV.D A1,8(a6)
NEG.D A1
POP A6
RET
_238:
MOV.D A1,8(a6)
POP A6
RET
_atoi:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
_240:
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _241
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _240
_241:
MOV.D A2,A6
ADD.D A2,-4
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
JR _244
_245:
MOV.D A2,A6
ADD.D A2,-4
MOV.D A1,-1
MOV.D (a2),A1
_246:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _243
_244:
JRSR __switch
 DA _245
 DD 45
 DA _246
 DD 43
 DD 0
_243:
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
_247:
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isdigit
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _248
MOV.D A1,-8(a6)
MOV.D A2,10
MUL.D A1,A2
PUSH A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
ADD.D A2,A1
MOV.D A1,48
XCHG A1,A2
SUB.D A1,A2
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
JR _247
_248:
MOV.D A1,-8(a6)
MOV.D A2,-4(A6)
MUL.D A1,A2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_atoib:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,A6
ADD.D A2,-4
XOR.D A1,A1
MOV.D (a2),A1
_250:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isspace
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _251
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _250
_251:
_252:
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,127
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A2,A1
MOV.D A1,48
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _253
MOV.D A2,-8(A6)
MOV.D A1,97
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _254
MOV.D A2,A6
ADD.D A2,-8
PUSH A2
MOV.D a1,(A2)
SUB.D A1,87
POP A2
MOV.D (a2),A1
JR _255
_254:
MOV.D A2,-8(A6)
MOV.D A1,65
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _256
MOV.D A2,A6
ADD.D A2,-8
PUSH A2
MOV.D a1,(A2)
SUB.D A1,55
POP A2
MOV.D (a2),A1
JR _257
_256:
MOV.D A2,A6
ADD.D A2,-8
PUSH A2
MOV.D a1,(A2)
SUB.D A1,48
POP A2
MOV.D (a2),A1
_257:
_255:
MOV.D A1,8(a6)
MOV.D A2,-8(A6)
JRSR __ge
OR.D A1,A1
JRNZ 6
JR _258
JR _253
_258:
MOV.D A1,-4(a6)
MOV.D A2,8(A6)
MUL.D A1,A2
PUSH A1
MOV.D A1,-8(a6)
POP A2
ADD.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
JR _252
_253:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_dtoi:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,45
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _260
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _261
_260:
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
_261:
MOV.D A4,12(A6)
PUSH A4
MOV.D A4,8(A6)
PUSH A4
MOV.D A3,2
JRSR _utoi
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
CMPI A1,0
JRL 6
JR _262
MOV.D A1,-2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_262:
MOV.D A2,8(A6)
MOV.D a1,(A2)
CMPI A1,0
JRL 6
JR _263
MOV.D A1,-2
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_263:
MOV.D A1,-8(a6)
OR.D A1,A1
JRNZ 6
JR _264
MOV.D A2,8(A6)
MOV.D a1,(A2)
NEG.D A1
MOV.D A2,8(A6)
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_264:
MOV.D A1,-4(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_265:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_fprintf:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
JRSR _CCARGC
MOV.D A2,A1
MOV.D A1,A6
ADD.D A1,8
SLL.D A2,2
ADD.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
SUBI A1,1
SUBI A1,1
SUBI A1,1
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,A1
MOV.D A4,(A2)
PUSH A4
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
SUBI A1,1
SUBI A1,1
SUBI A1,1
SUBI A1,1
MOV.D (a2),A1
PUSH A1
MOV.D A3,2
JRSR __print
ADD.D SP,8
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_printf:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,1
PUSH A1
JRSR _CCARGC
MOV.D A2,A1
MOV.D A1,A6
ADD.D A1,8
SLL.D A2,2
ADD.D A2,A1
MOV.D A1,4
XCHG A1,A2
SUB.D A1,A2
PUSH A1
MOV.D A3,2
JRSR __print
ADD.D SP,8
POP A6
RET
__buf_str DSW 19
__print:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-36
MOV.D A2,A6
ADD.D A2,-16
XOR.D A1,A1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUB.D (A2),4
MOV.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-32
MOV.D (a2),A1
_269:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _270
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,37
JRSR __ne
OR.D A1,A1
JRNZ 6
JR _271
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,-16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _269
JR _272
_271:
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
_272:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,37
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _273
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,-16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _269
_273:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,45
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _274
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _275
_274:
MOV.D A2,A6
ADD.D A2,-8
XOR.D A1,A1
MOV.D (a2),A1
_275:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,48
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _276
MOV.D A2,A6
ADD.D A2,-12
MOV.D A1,48
MOV.D (a2),A1
JR _277
_276:
MOV.D A2,A6
ADD.D A2,-12
MOV.D A1,32
MOV.D (a2),A1
_277:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isdigit
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _278
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A3,1
JRSR _atoi
ADD.D SP,4
MOV.D A2,A6
ADD.D A2,-28
MOV.D (a2),A1
_279:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isdigit
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _280
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _279
_280:
JR _281
_278:
MOV.D A2,A6
ADD.D A2,-28
XOR.D A1,A1
MOV.D (a2),A1
_281:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,46
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _282
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
PUSH A1
MOV.D A3,1
JRSR _atoi
ADD.D SP,4
MOV.D A2,A6
ADD.D A2,-24
MOV.D (a2),A1
_283:
MOV.D A2,-32(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,1
JRSR _isdigit
ADD.D SP,4
OR.D A1,A1
JRNZ 6
JR _284
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _283
_284:
JR _285
_282:
MOV.D A2,A6
ADD.D A2,-24
XOR.D A1,A1
MOV.D (a2),A1
_285:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUB.D (A2),4
MOV.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
GADR A1,__buf_str ;p1
MOV.D A2,A6
ADD.D A2,-36
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-32
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
JR _288
_289:
MOV.D A1,-4(a6)
GADR A2,__buf_str ;p2
MOV.B (A2),A1
GADR A2,__buf_str
ADD.D A2,=0+1
XOR.D A1,A1
MOV.B (A2),A1
JR _287
_290:
MOV.D A1,-4(a6)
MOV.D A2,A6
ADD.D A2,-36
MOV.D (a2),A1
JR _287
_291:
MOV.D A4,-4(A6)
PUSH A4
GADR A1,__buf_str ;p1
PUSH A1
MOV.D A3,2
JRSR _itoa
ADD.D SP,8
JR _287
_292:
MOV.D A4,-4(A6)
PUSH A4
GADR A1,__buf_str ;p1
PUSH A1
MOV.D A1,2
PUSH A1
MOV.D A3,3
JRSR _itoab
ADD.D SP,12
JR _287
_293:
MOV.D A4,-4(A6)
PUSH A4
GADR A1,__buf_str ;p1
PUSH A1
MOV.D A1,8
PUSH A1
MOV.D A3,3
JRSR _itoab
ADD.D SP,12
JR _287
_294:
MOV.D A4,-4(A6)
PUSH A4
GADR A1,__buf_str ;p1
PUSH A1
MOV.D A1,10
PUSH A1
MOV.D A3,3
JRSR _itoab
ADD.D SP,12
JR _287
_295:
MOV.D A4,-4(A6)
PUSH A4
GADR A1,__buf_str ;p1
PUSH A1
MOV.D A1,16
PUSH A1
MOV.D A3,3
JRSR _itoab
ADD.D SP,12
JR _287
_296:
MOV.D A1,-16(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
JR _287
_288:
JRSR __switch
 DA _289
 DD 99
 DA _290
 DD 115
 DA _291
 DD 100
 DA _292
 DD 98
 DA _293
 DD 111
 DA _294
 DD 117
 DA _295
 DD 120
 DD 0
JR _296
_287:
MOV.D A4,-36(A6)
PUSH A4
MOV.D A3,1
JRSR _strlen
ADD.D SP,4
MOV.D A2,A6
ADD.D A2,-20
MOV.D (a2),A1
MOV.D A1,-24(a6)
OR.D A1,A1
JRNZ 6
JR _298
MOV.D A1,-20(a6)
MOV.D A2,-24(A6)
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _298
MOV.D A1,1
JR _299
_298:
XOR.D A1,A1
_299:
OR.D A1,A1
JRNZ 6
JR _297
MOV.D A1,-24(a6)
MOV.D A2,A6
ADD.D A2,-20
MOV.D (a2),A1
_297:
MOV.D A1,-20(a6)
MOV.D A2,-28(A6)
JRSR __gt
OR.D A1,A1
JRNZ 6
JR _300
MOV.D A2,-20(A6)
MOV.D A1,-28(a6)
SUB.D A1,A2
MOV.D A2,A6
ADD.D A2,-28
MOV.D (a2),A1
JR _301
_300:
MOV.D A2,A6
ADD.D A2,-28
XOR.D A1,A1
MOV.D (a2),A1
_301:
MOV.D A1,-8(a6)
CMPI A1,0
JRZ 2
MOVI A1,1
XOR.D A1,1
OR.D A1,A1
JRNZ 6
JR _302
_303:
MOV.D A2,A6
ADD.D A2,-28
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _304
MOV.D A4,-12(A6)
PUSH A4
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,-16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _303
_304:
_302:
_305:
MOV.D A2,A6
ADD.D A2,-20
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _306
MOV.D A2,A6
ADD.D A2,-36
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,-16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _305
_306:
MOV.D A1,-8(a6)
OR.D A1,A1
JRNZ 6
JR _307
_308:
MOV.D A2,A6
ADD.D A2,-28
MOV.D a1,(A2)
MOV.D A5,(A2)
SUBI A5,1
MOV.D (A2),A5
OR.D A1,A1
JRNZ 6
JR _309
MOV.D A4,-12(A6)
PUSH A4
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,2
JRSR _fputc
ADD.D SP,8
MOV.D A2,A6
ADD.D A2,-16
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _308
_309:
_307:
JR _269
_270:
MOV.D A1,-16(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_isascii:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A2,8(A6)
MOV.D A1,128
JRSR __lt
POP A6
RET
_itoa:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A1,8(a6)
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A1,12(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
CMPI A1,0
JRL 6
JR _312
MOV.D A1,12(a6)
NEG.D A1
MOV.D A2,A6
ADD.D A2,12
MOV.D (a2),A1
_312:
_313:
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,12(A6)
MOV.D A1,10
MOVI A0,9
INT 4
MOV.D A1,A0
ADD.D A1,48
POP A2
MOV.B (A2),A1
MOV.D A2,12(A6)
MOV.D A1,10
MOVI A0,9
INT 4
MOV.D A2,A6
ADD.D A2,12
MOV.D (a2),A1
CMPI A1,0
JRG 6
JR _314
JR _313
_314:
MOV.D A1,-4(a6)
CMPI A1,0
JRL 6
JR _315
MOV.D A2,A6
ADD.D A2,-8
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.D A1,45
MOV.B (A2),A1
_315:
MOV.D A2,-8(A6)
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A4,8(A6)
PUSH A4
MOV.D A3,1
JRSR _reverse
ADD.D SP,4
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_itoab:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A1,12(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
PUSH A2
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,1
SUBI A1,1
SETX A1
SRA.D A2,1
JRX -8
XCHG A1,A2
POP A2
MOV.D (a2),A1
_317:
MOV.D A2,16(A6)
MOV.D A1,1
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,-8
MOV.D (a2),A1
MOV.D A2,16(A6)
MOV.D A1,1
SUBI A1,1
SETX A1
SRA.D A2,1
JRX -8
XCHG A1,A2
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
MOV.D A1,8(a6)
MOV.D A2,16(A6)
MOVI A0,9
INT 4
MOV.D A1,A0
MOV.D A2,A1
MOV.D A1,1
SUBI A1,1
SETX A1
SLA.D A2,1
JRX -8
XCHG A1,A2
PUSH A1
MOV.D A1,-8(a6)
POP A2
ADD.D A1,A2
MOV.D A2,-4(A6)
MOV.B (A2),A1
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,10
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _319
MOV.D A1,-4(a6)
PUSH A1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
ADD.D A1,48
POP A2
MOV.B (A2),A1
JR _320
_319:
MOV.D A1,-4(a6)
PUSH A1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
ADD.D A1,55
POP A2
MOV.B (A2),A1
_320:
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,16
PUSH A2
MOV.D A4,(A2)
PUSH A4
MOV.D A1,8(a6)
POP A2
MOVI A0,9
INT 4
POP A2
MOV.D (a2),A1
OR.D A1,A1
JRNZ 6
JR _318
JR _317
_318:
MOV.D A2,-4(A6)
XOR.D A1,A1
MOV.B (A2),A1
MOV.D A4,12(A6)
PUSH A4
MOV.D A3,1
JRSR _reverse
ADD.D SP,4
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_itod:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,16(a6)
CMPI A1,0
JRL 6
JR _322
MOV.D A1,16(a6)
NEG.D A1
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D A1,45
MOV.D (a2),A1
JR _323
_322:
MOV.D A2,A6
ADD.D A2,-4
MOV.D A1,32
MOV.D (a2),A1
_323:
MOV.D A1,8(a6)
CMPI A1,0
JRG 6
JR _324
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
JR _325
_324:
MOV.D A1,8(a6)
CMPI A1,0
JRL 6
JR _326
MOV.D A1,8(a6)
NEG.D A1
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
JR _327
_326:
_328:
MOV.D A1,8(a6)
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _329
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _328
_329:
_327:
_325:
_330:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _331
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A1,A2
PUSH A1
MOV.D A2,16(A6)
MOV.D A1,10
MOVI A0,9
INT 4
MOV.D A1,A0
ADD.D A1,48
POP A2
MOV.B (A2),A1
MOV.D A2,16(A6)
MOV.D A1,10
MOVI A0,9
INT 4
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
OR.D A1,A1
JRZ 6
JR _332
JR _331
_332:
JR _330
_331:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _333
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A1,A2
PUSH A1
MOV.D A1,-4(a6)
POP A2
MOV.B (A2),A1
_333:
_334:
MOV.D A1,8(a6)
CMPI A1,0
JRG 6
JR _335
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.D A1,32
MOV.B (A2),A1
JR _334
_335:
MOV.D A1,12(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_itoo:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,8(a6)
CMPI A1,0
JRG 6
JR _337
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
JR _338
_337:
MOV.D A1,8(a6)
CMPI A1,0
JRL 6
JR _339
MOV.D A1,8(a6)
NEG.D A1
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
JR _340
_339:
_341:
MOV.D A1,8(a6)
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _342
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _341
_342:
_340:
_338:
_343:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _344
MOV.D A2,16(A6)
MOV.D A1,7
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,16(A6)
MOV.D A1,3
SUBI A1,1
SETX A1
SRA.D A2,1
JRX -8
XCHG A1,A2
MOV.D A2,A1
MOV.D A1,8191
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A1,A2
PUSH A1
MOV.D A1,-4(a6)
ADD.D A1,48
POP A2
MOV.B (A2),A1
MOV.D A1,16(a6)
OR.D A1,A1
JRZ 6
JR _345
JR _344
_345:
JR _343
_344:
_346:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _347
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.D A1,32
MOV.B (A2),A1
JR _346
_347:
MOV.D A1,12(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_itou:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,8(a6)
CMPI A1,0
JRG 6
JR _349
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
JR _350
_349:
MOV.D A1,8(a6)
CMPI A1,0
JRL 6
JR _351
MOV.D A1,8(a6)
NEG.D A1
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
JR _352
_351:
_353:
MOV.D A1,8(a6)
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _354
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _353
_354:
_352:
_350:
_355:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _356
MOV.D A2,16(A6)
MOV.D A1,1
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,16(A6)
MOV.D A1,1
SUBI A1,1
SETX A1
SRA.D A2,1
JRX -8
XCHG A1,A2
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A1,A2
PUSH A1
MOV.D A2,16(A6)
MOV.D A1,5
MOVI A0,9
INT 4
MOV.D A1,A0
MOV.D A2,A1
MOV.D A1,1
SUBI A1,1
SETX A1
SLA.D A2,1
JRX -8
XCHG A1,A2
PUSH A1
MOV.D A1,-4(a6)
POP A2
ADD.D A1,A2
ADD.D A1,48
POP A2
MOV.B (A2),A1
MOV.D A2,16(A6)
MOV.D A1,5
MOVI A0,9
INT 4
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
OR.D A1,A1
JRZ 6
JR _357
JR _356
_357:
JR _355
_356:
_358:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _359
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.D A1,32
MOV.B (A2),A1
JR _358
_359:
MOV.D A1,12(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_itox:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-8
MOV.D A1,8(a6)
CMPI A1,0
JRG 6
JR _361
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
XOR.D A1,A1
MOV.B (A2),A1
JR _362
_361:
MOV.D A1,8(a6)
CMPI A1,0
JRL 6
JR _363
MOV.D A1,8(a6)
NEG.D A1
MOV.D A2,A6
ADD.D A2,8
MOV.D (a2),A1
JR _364
_363:
_365:
MOV.D A1,8(a6)
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _366
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _365
_366:
_364:
_362:
_367:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _368
MOV.D A2,16(A6)
MOV.D A1,15
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
MOV.D A2,16(A6)
MOV.D A1,4
SUBI A1,1
SETX A1
SRA.D A2,1
JRX -8
XCHG A1,A2
MOV.D A2,A1
MOV.D A1,4095
AND.D A1,A2
MOV.D A2,A6
ADD.D A2,16
MOV.D (a2),A1
MOV.D A2,-4(A6)
MOV.D A1,10
JRSR __lt
OR.D A1,A1
JRNZ 6
JR _369
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,48
MOV.D (a2),A1
JR _370
_369:
MOV.D A2,A6
ADD.D A2,-8
MOV.D A1,55
MOV.D (a2),A1
_370:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A1,A2
PUSH A1
MOV.D A1,-8(a6)
MOV.D A2,-4(A6)
ADD.D A1,A2
POP A2
MOV.B (A2),A1
MOV.D A1,16(a6)
OR.D A1,A1
JRZ 6
JR _371
JR _368
_371:
JR _367
_368:
_372:
MOV.D A1,8(a6)
OR.D A1,A1
JRNZ 6
JR _373
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
SUBI A1,1
MOV.D (a2),A1
MOV.D A2,12(A6)
ADD.D A2,A1
MOV.D A1,32
MOV.B (A2),A1
JR _372
_373:
MOV.D A1,12(a6)
SUBI A6,4
MOV.D SP,A6
POP A6
RET
_left:
PUSH A6
MOV.D A6,SP
ADDI A6,4
ADD.D SP,-4
MOV.D A1,8(a6)
MOV.D A2,A6
ADD.D A2,-4
MOV.D (a2),A1
_375:
MOV.D A2,-4(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
MOV.D A2,A1
MOV.D A1,32
JRSR __eq
OR.D A1,A1
JRNZ 6
JR _376
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _375
_376:
_377:
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADD.D (A2),1
PUSH A1
MOV.D A2,A6
ADD.D A2,-4
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
MOV.B (A2),A1
OR.D A1,A1
JRNZ 6
JR _378
JR _377
_378:
SUBI A6,4
MOV.D SP,A6
POP A6
RET
__lex DB 0,1,2,3,4,5,6,7,8,9
 DB 10,11,12,13,14,15,16,17,18,19
 DB 20,21,22,23,24,25,26,27,28,29
 DB 30,31,32,33,34,35,36,37,38,39
 DB 40,41,42,43,44,45,46,47,65,66
 DB 67,68,69,70,71,72,73,74,48,49
 DB 50,51,52,53,54,75,76,77,78,79
 DB 80,81,82,83,84,85,86,87,88,89
 DB 90,91,92,93,94,95,96,97,98,99
 DB 100,55,56,57,58,59,60,75,76,77
 DB 78,79,80,81,82,83,84,85,86,87
 DB 88,89,90,91,92,93,94,95,96,97
 DB 98,99,100,61,62,63,64,127
_lexcmp:
PUSH A6
MOV.D A6,SP
ADDI A6,4
_380:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,2
JRSR _lexorder
ADD.D SP,8
OR.D A1,A1
JRZ 6
JR _381
MOV.D A2,A6
ADD.D A2,12
MOV.D a1,(A2)
ADD.D (A2),1
MOV.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
OR.D A1,A1
JRNZ 6
JR _382
MOV.D A2,A6
ADD.D A2,8
MOV.D a1,(A2)
ADDI A1,1
MOV.D (a2),A1
JR _383
_382:
XOR.D A1,A1
POP A6
RET
_383:
JR _380
_381:
MOV.D A2,12(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A2,8(A6)
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A3,2
JRSR _lexorder
ADD.D SP,8
POP A6
RET
_lexorder:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,12(a6)
GADR A2,__lex ;p2
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
PUSH A1
MOV.D A1,8(a6)
GADR A2,__lex ;p2
ADD.D A2,A1
MOV.B A1,(A2)
SEX.B A1 ; b2 !!!
POP A2
XCHG A1,A2
SUB.D A1,A2
POP A6
RET
__is DD 4,4,4,4,4,4,4,4,4,260
 DD 260,260,260,260,4,4,4,4,4,4
 DD 4,4,4,4,4,4,4,4,4,4
 DD 4,4,320,208,208,208,208,208,208,208
 DD 208,208,208,208,208,208,208,208,1113,1113
 DD 1113,1113,1113,1113,1113,1113,1113,1113,208,208
 DD 208,208,208,208,208,1619,1619,1619,1619,1619
 DD 1619,595,595,595,595,595,595,595,595,595
 DD 595,595,595,595,595,595,595,595,595,595
 DD 595,208,208,208,208,208,208,1139,1139,1139
 DD 1139,1139,1139,115,115,115,115,115,115,115
 DD 115,115,115,115,115,115,115,115,115,115
 DD 115,115,115,208,208,208,208,4
_isalnum:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,1
AND.D A1,A2
POP A6
RET
_isalpha:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,2
AND.D A1,A2
POP A6
RET
_iscntrl:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,4
AND.D A1,A2
POP A6
RET
_isdigit:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,8
AND.D A1,A2
POP A6
RET
_isgraph:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,16
AND.D A1,A2
POP A6
RET
_islower:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,32
AND.D A1,A2
POP A6
RET
_isprint:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,64
AND.D A1,A2
POP A6
RET
_ispunct:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,128
AND.D A1,A2
POP A6
RET
_isspace:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,256
AND.D A1,A2
POP A6
RET
_isupper:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,512
AND.D A1,A2
POP A6
RET
_isxdigit:
PUSH A6
MOV.D A6,SP
ADDI A6,4
MOV.D A1,8(a6)
GADR A2,__is ;p2
SLL.D A1,2
ADD.D A2,A1
MOV.D a1,(A2)
MOV.D A2,A1
MOV.D A1,1024
AND.D A1,A2
POP A6
RET
 
_XY EQU $4868
_putchar:
 MOV.D A4,SP
 MOV.D A1,8(A4)
 MOV.D A7,$3519501E
 IN A5,24
 OR.B A5,A5
 JRZ 2
 SWAP.D A7
 MOV.D A4,_XY
 MOV.B A3,(A4)
 MOV.B A2,1(A4)
 SWAP A7
 CMP.B A3,A7
 JRC _pc2
 SWAP A7
 MOVI A3,0
 INC  A2
 CMP.B A2,A7
 JRC 4
 MOV.B A2,A7
 DEC A2
 MOVI A0,6
 INT 4
 SWAP A7
_pc2: MOV.B 1(A4),A2
 SWAP A7
 MOV.B (A4),A3
 CMP.B A1,13
 JRZ _pc1
 CMP.B A1,31
 JRA 4
 MOV.B A1,32
 MOV A2,(_XY)
 MOVI A0,4
 INT 4
 ADD A2,$0100
 MOV (_XY),A2
 RET
_pc1: 
 MOVI A0,6
 INT 4
 DEC A7
 CMP.B A2,A7
 JRZ 2
 ADDI A2,1
 MOV.B 1(A4),A2
 MOV.B (A4),0
 RET
 
_getkey:
__getkey:
 MOVI A0,0
 INT 4
 BTST A0,1
 JRZ 2
 RET
 MOVI A0,7
 INT 4
 BTST A0,2
 JRZ _getkey
 MOVI A0,10
 INT 4
 RET
 
_hitkey:
__hitkey:
 MOVI A0,7
 INT 4
 AND.D A0,$04
 MOV.D A1,A0
 
__switch: 
GADR A0,_base
MOVR.D (Baddr),A0
 POP A2
_sw1: MOV.D A0,(A2)
 ADDI A2,4
 MOV.D A5,(A2)
 CMPI A0,0
 JZ A2
 MOVR.D A4,(Baddr)
 ADD.D A0,A4
 CMP.D A5,A1
 JZ A0
 ADDI A2,4
 JR _sw1
 
__eq: 
 CMP.D A2,A1
 JRZ _EQ1
 MOVI A1,0
 RET
_EQ1:
 RET
__ne: 
 CMP.D A2,A1
 JRNZ _EQ1
 MOVI A1,0
 RET
__lt: 
 CMP.D A2,A1
 JRL _EQ1
 MOVI A1,0
 RET
__le: 
 CMP.D A2,A1
 JRLE _EQ1
 MOVI A1,0
 RET
__ge: 
 CMP.D A2,A1
 JRGE _EQ1
 MOVI A1,0
 RET
__gt: 
 CMP.D A2,A1
 JRG _EQ1
 MOVI A1,0
 RET
__ult: 
 CMP.D A2,A1
 JRC _EQ1
 MOVI A1,0
 RET
__ule: 
 CMP.D A2,A1
 JRBE _EQ1
 MOVI A1,0
 RET
__uge: 
 CMP.D A2,A1
 JRA _EQ1
 JRZ _EQ1
 MOVI A1,0
 RET
__ugt: 
 CMP.D A2,A1
 JRA _EQ1
 MOVI A1,0
 RET
_CCARGC:
 MOV.D A1,A3
_exit:
 RET
_endofall:
