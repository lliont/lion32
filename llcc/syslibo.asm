ORG 0
_XY EQU $4868
FMEMORG EQU $4864
MOVR.D (_cmdlbuf),A7
JRSR __main
POP A0
RET
_RAND:
DD $000000c5
_Set_sprite:
PUSH A5
PUSH A6
PUSH A7
MOV.D A5,A7
MOV A7,SP
MOV.D A6,A7
SUB.D A6,8
SUB.D SP,24
MOV.D A1,A5
SUBI A1,4
PUSH A1
MOV.D A1,A5
SUBI A1,4
  MOV.D A1,(A1)
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,8
PUSH A1
MOV.D A1,A5
  MOV.D A1,(A1)
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,12
  MOV.D A2,A1
  MOVI A1,$0000000e
MOV.D (A2),A1
MOV.D A1,A6
PUSH A1
MOV.D A1,A6
SUBI A1,8
PUSH (A1)
MOV.D A1,A6
SUBI A1,12
  MOV.D A1,(A1)
POP A2
MOVI A0,9
INT 4
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,4
PUSH A1
MOV.D A1,A6
SUBI A1,8
PUSH (A1)
MOV.D A1,A6
SUBI A1,12
  MOV.D A1,(A1)
POP A2
MOVI A0,9
INT 4
  MOV.D A1,A0
POP A2
MOV.D (A2),A1
MOV.D A1,A6
  MOV.D A2,(A1)
  MOVI A1,$0000000c
SLA.D A2,A1
  MOV.D A1,$00004000
ADD.D A1,A2
PUSH A1
MOV.D A1,A5
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000008
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
PUSH A1
MOV.D A1,A6
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000003
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
MOV.D (A7),A1
MOV.D A1,A5
SUBI A1,12
  MOV.D A1,(A1)
MOV.D -4(A7),A1
GADR A1,_IOout
MOVR.D (_argnum),2
MOVR.D (_argbs),A7
JSR A1
ADD.D SP,4
MOV.D A1,A6
  MOV.D A2,(A1)
  MOVI A1,$0000000c
SLA.D A2,A1
  MOV.D A1,$00004000
ADD.D A1,A2
  MOV.D A2,A1
  MOVI A1,$00000002
ADD.D A1,A2
PUSH A1
MOV.D A1,A5
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000008
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
PUSH A1
MOV.D A1,A6
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000003
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
MOV.D (A7),A1
MOV.D A1,A5
SUB.D A1,16
  MOV.D A1,(A1)
MOV.D -4(A7),A1
GADR A1,_IOout
MOVR.D (_argnum),2
MOVR.D (_argbs),A7
JSR A1
ADD.D SP,4
MOV.D A1,A6
  MOV.D A2,(A1)
  MOVI A1,$0000000c
SLA.D A2,A1
  MOV.D A1,$00004000
ADD.D A1,A2
  MOV.D A2,A1
  MOVI A1,$00000006
ADD.D A1,A2
PUSH A1
MOV.D A1,A5
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000008
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
PUSH A1
MOV.D A1,A6
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000003
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
MOV.D (A7),A1
MOV.D A1,A5
SUBI A1,8
  MOV.D A1,(A1)
MOV.D -4(A7),A1
GADR A1,_IOout
MOVR.D (_argnum),2
MOVR.D (_argbs),A7
JSR A1
ADD.D SP,4
_$1:
_Set_sprite_end:
POP A4
MOV SP,A7
POP A7
POP A6
POP A5
POP A1
PUSH A4
JMP A1
_Disable_sprite:
PUSH A5
PUSH A6
PUSH A7
MOV.D A5,A7
MOV A7,SP
MOV.D A6,A7
SUB.D A6,8
SUB.D SP,24
MOV.D A1,A6
SUBI A1,8
PUSH A1
MOV.D A1,A5
  MOV.D A1,(A1)
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,12
  MOV.D A2,A1
  MOVI A1,$0000000e
MOV.D (A2),A1
MOV.D A1,A6
PUSH A1
MOV.D A1,A6
SUBI A1,8
PUSH (A1)
MOV.D A1,A6
SUBI A1,12
  MOV.D A1,(A1)
POP A2
MOVI A0,9
INT 4
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,4
PUSH A1
MOV.D A1,A6
SUBI A1,8
PUSH (A1)
MOV.D A1,A6
SUBI A1,12
  MOV.D A1,(A1)
POP A2
MOVI A0,9
INT 4
  MOV.D A1,A0
POP A2
MOV.D (A2),A1
MOV.D A1,A6
  MOV.D A2,(A1)
  MOVI A1,$0000000c
SLA.D A2,A1
  MOV.D A1,$00004000
ADD.D A1,A2
  MOV.D A2,A1
  MOVI A1,$00000006
ADD.D A1,A2
  MOV.D A2,A1
  MOV.D A1,$00000100
ADD.D A1,A2
PUSH A1
MOV.D A1,A6
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000003
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
MOV.D (A7),A1
  MOVI A1,$00000000
MOV.D -4(A7),A1
GADR A1,_IOout
MOVR.D (_argnum),2
MOVR.D (_argbs),A7
JSR A1
ADD.D SP,4
MOV.D A1,A6
  MOV.D A2,(A1)
  MOVI A1,$0000000c
SLA.D A2,A1
  MOV.D A1,$00004000
ADD.D A1,A2
  MOV.D A2,A1
  MOVI A1,$00000006
ADD.D A1,A2
PUSH A1
MOV.D A1,A6
SUBI A1,4
  MOV.D A2,(A1)
  MOVI A1,$00000003
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
MOV.D (A7),A1
  MOVI A1,$00000000
MOV.D -4(A7),A1
GADR A1,_IOout
MOVR.D (_argnum),2
MOVR.D (_argbs),A7
JSR A1
ADD.D SP,4
_$2:
_Disable_sprite_end:
POP A4
MOV SP,A7
POP A7
POP A6
POP A5
POP A1
PUSH A4
JMP A1
_Set_sprite_data:
PUSH A5
PUSH A6
PUSH A7
MOV.D A5,A7
MOV A7,SP
MOV.D A6,A7
SUB.D A6,8
SUB.D SP,36
MOV.D A1,A5
SUBI A1,8
PUSH A1
MOV.D A1,A5
SUBI A1,8
  MOV.D A1,(A1)
POP A2
MOV.D (A2),A1
MOV.D A1,A5
SUBI A1,12
PUSH A1
MOV.D A1,A5
SUBI A1,12
  MOV.D A1,(A1)
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUB.D A1,16
PUSH A1
MOV.D A1,A5
  MOV.D A1,(A1)
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUB.D A1,20
  MOV.D A2,A1
  MOVI A1,$0000000e
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,8
PUSH A1
MOV.D A1,A6
SUB.D A1,16
PUSH (A1)
MOV.D A1,A6
SUB.D A1,20
  MOV.D A1,(A1)
POP A2
MOVI A0,9
INT 4
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,12
PUSH A1
MOV.D A1,A6
SUB.D A1,16
PUSH (A1)
MOV.D A1,A6
SUB.D A1,20
  MOV.D A1,(A1)
POP A2
MOVI A0,9
INT 4
  MOV.D A1,A0
POP A2
MOV.D (A2),A1
MOV.D A1,A6
SUBI A1,4
PUSH A1
MOV.D A1,A6
SUBI A1,8
  MOV.D A2,(A1)
  MOVI A1,$0000000c
SLA.D A2,A1
  MOV.D A1,$00004200
ADD.D A1,A2
PUSH A1
PUSH $00000700
MOV.D A1,A5
SUBI A1,4
  MOV.D A1,(A1)
POP A2
MUL.D A1,A2
POP A2
ADD.D A1,A2
PUSH A1
MOV.D A1,A6
SUBI A1,12
  MOV.D A2,(A1)
  MOVI A1,$00000007
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
POP A2
MOV.D (A2),A1
MOV.D A1,A6
  MOV.D A2,A1
  MOVI A1,$00000000
MOV.D (A2),A1
_$4:
MOV.D A1,A6
SUBI A1,4
PUSH (A1)
MOV.D A1,A6
  MOV.D A1,(A1)
POP A2
ADD.D A1,A2
MOV.D (A7),A1
MOV.D A1,A6
PUSH (A1)
MOV.D A1,A5
SUBI A1,12
  MOV.D A2,(A1)
  MOVI A1,$00000007
SLA.D A2,A1
  MOV.D A1,A2
POP A2
ADD.D A1,A2
PUSH A1
MOV.D A1,A5
SUBI A1,8
  MOV.D A1,(A1)
POP A2
ADD.D A1,A2
CMOV.B A2,(A1)
  MOV.D A1,A2
SEX.B A1
MOV.D -4(A7),A1
GADR A1,_IOoutb
MOVR.D (_argnum),2
MOVR.D (_argbs),A7
JSR A1
ADD.D SP,4
_$5:
MOV.D A1,A6
PUSH A1
MOV.D A1,A6
  MOV.D A2,(A1)
  MOVI A1,$00000001
ADD.D A1,A2
POP A2
MOV.D (A2),A1
MOV.D A1,A6
  MOV.D A2,(A1)
  MOV.D A1,$00000080
CMP.D A2,A1
JRL _$4
_$3:
_Set_sprite_data_end:
POP A4
MOV SP,A7
POP A7
POP A6
POP A5
POP A1
PUSH A4
JMP A1
__END: RET
